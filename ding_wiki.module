<?php

/**
 * Implementation of hook_menu().
 */
function ding_wiki_menu() {
  $items = array();
  
  $items['node/%node/create-wiki-page'] = array(
    'title' => 'Create new wiki page',
    'page callback' => 'drupal_goto',
    'page arguments' => array('node/add/wiki-page'),
    'access callback' => '_ding_wiki_node_is_wiki',
    'access arguments' => array(1),
    'type' => MENU_LOCAL_TASK,
    'weight' => -10, //We need to be before the view tab
  );
  
  return $items;
}

/**
 * Implementation of hook_form_ID_alter().
 */
function ding_wiki_form_node_access_page_alter(&$form, &$form_state) {
  //Make Access control lists collapsed by default. They are seldom needed.
  $form['nacl']['#collapsed'] = TRUE;
}

function _ding_wiki_node_is_wiki($node) {
  return $node->type == 'wiki_page';
}

include_once('ding_wiki.features.inc');
